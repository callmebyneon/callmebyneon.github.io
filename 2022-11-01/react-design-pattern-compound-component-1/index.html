<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.23.1"/><meta data-react-helmet="true" name="description" content="What is Compound Component"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1.0"/><meta data-react-helmet="true" http-equiv="Content-Type" content="text/html;charset=UTF-8"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="React Design Pattern - Compound Component (1)"/><meta data-react-helmet="true" property="og:description" content="What is Compound Component"/><meta data-react-helmet="true" property="og:image" content="🧙‍♂️"/><meta data-react-helmet="true" property="og:url"/><meta data-react-helmet="true" property="og:site_name" content="React Design Pattern - Compound Component (1)"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="React Design Pattern - Compound Component (1)"/><meta data-react-helmet="true" name="twitter:description" content="What is Compound Component"/><meta data-react-helmet="true" name="twitter:image" content="🧙‍♂️"/><meta data-react-helmet="true" name="twitter:site" content="@callmebyneon"/><meta data-react-helmet="true" name="twitter:creator" content="@callmebyneon"/><meta data-react-helmet="true" name="theme-color" content="#f6f6f6"/><title data-react-helmet="true">React Design Pattern - Compound Component (1)</title><link data-react-helmet="true" rel="preconnect" href="https://fonts.googleapis.com"/><link data-react-helmet="true" rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><link data-react-helmet="true" href="https://fonts.googleapis.com/css2?family=Noto+Sans+Mono&amp;display=swap" rel="stylesheet"/><link data-react-helmet="true" rel="stylesheet" as="style" crossorigin="true" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.6/dist/web/static/pretendard-dynamic-subset.css"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="canonical" href="http://callmebyneon.github.io/2022-11-01/react-design-pattern-compound-component-1/" data-baseprotocol="http:" data-basehost="callmebyneon.github.io"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css 13ku56z">.css-13ku56z{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}</style><main class="css-13ku56z e1strnqo0"><style data-emotion="css-global mnnv44">:root{--background-color:#f6f6f6;--z-sticky:10;}*{padding:0;margin:0;box-sizing:border-box;font-family:Pretendard,-apple-system,BlinkMacSystemFont,system-ui,Roboto,'Helvetica Neue','Segoe UI','Apple SD Gothic Neo','Noto Sans KR','Malgun Gothic','Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol',sans-serif;}html,body,#___gatsby{height:100%;font-size:16px;background-color:var(--background-color);}@media (max-width: 768px){html,body,#___gatsby{font-size:14px;}}a,a:hover{color:inherit;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}code[class*='language-'],pre[class*='language-'],code[class*='language-'] *,pre[class*='language-'] *{font-family:'Noto Sans Mono',monospace;}small{font-size:0.875rem;}img{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}</style><style data-emotion="css 1082qq3">.css-1082qq3{display:block;width:100%;}</style><nav class="css-1082qq3 e1md2nih1"><style data-emotion="css 1kpck90">.css-1kpck90{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:1200px;margin:0 auto;height:100px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;}.css-1kpck90>a{display:block;margin-left:2.5em;font-size:1.25rem;font-weight:700;border-bottom:1px solid;}.css-1kpck90>a svg{font-size:0.8em;}@media (max-width: 768px){.css-1kpck90{width:100%;height:80px;padding:2rem;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;}.css-1kpck90>a{margin-left:0;margin-right:2em;}}</style><div class="css-1kpck90 e1md2nih0"><a href="/">Blog</a><a href="/portfolio">Portfolio</a><a rel="noopener" href="https://github.com/callmebyneon" target="_blank">Github <!-- --><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-up-right-from-square" class="svg-inline--fa fa-arrow-up-right-from-square " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M288 32c-17.7 0-32 14.3-32 32s14.3 32 32 32h50.7L169.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L384 141.3V192c0 17.7 14.3 32 32 32s32-14.3 32-32V64c0-17.7-14.3-32-32-32H288zM80 64C35.8 64 0 99.8 0 144V400c0 44.2 35.8 80 80 80H336c44.2 0 80-35.8 80-80V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v80c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V144c0-8.8 7.2-16 16-16h80c17.7 0 32-14.3 32-32s-14.3-32-32-32H80z"></path></svg></a></div></nav><style data-emotion="css jor0o8">.css-jor0o8{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}</style><div class="css-jor0o8 e6b6ljm1"><div class="css-0 e1jthku01"><style data-emotion="css 1rlcym4">.css-1rlcym4{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:260px;max-height:calc(100vh - 80px);margin:0 80px 30px 0;padding:0;position:-webkit-sticky;position:sticky;left:calc(50vw - (768px / 2) - 260px);top:56px;word-break:keep-all;overflow-y:scroll;}.css-1rlcym4 li{list-style:none;display:block;width:96%;color:#aaa;line-height:2;font-size:14px;font-weight:400;}.css-1rlcym4 li>a{display:block;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}@media (hover: hover){.css-1rlcym4 li:hover{font-weight:700;color:rgb(64, 107, 159);border-width:2px;}}.css-1rlcym4 li>ul>li{margin-left:0.5em;padding-left:1em;border-left:1px solid;}.css-1rlcym4 li>ul>li>ul>li{margin-left:0.5em;padding-left:1em;border-left:1px solid;}@media (max-width: 1300px){.css-1rlcym4{display:none;}}</style><div class="css-1rlcym4 e1jthku00"><ul>
<li><a href="#intro">Intro</a></li>
<li><a href="#what-is-the-problem-of-god-like-component">What is the problem of God-like component</a></li>
<li><a href="#compound-component-instead-god-like-component"><strong>Compound Component</strong> instead God-like component</a></li>
<li><a href="#outro-this-is-no-silver-bullet-too">Outro, This is no silver bullet too</a></li>
</ul></div></div><style data-emotion="css 4agwq7">.css-4agwq7{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:768px;margin:0;}@media (max-width: 768px){.css-4agwq7{width:100%;}}</style><div class="css-4agwq7 e6b6ljm0"><style data-emotion="css 1m5ve8z">.css-1m5ve8z{position:relative;width:100%;margin:40px 0 100px;}</style><div class="css-1m5ve8z e1opi4mu0"><style data-emotion="css 1mgo80d">.css-1mgo80d{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:1200px;height:100%;margin:0 auto;padding:20px 0;color:#000;}@media (max-width: 1200px){.css-1mgo80d{width:768px;padding:40px 20px;}}@media (max-width: 768px){.css-1mgo80d{width:100%;}}</style><div class="css-1mgo80d e1st1jau3"><style data-emotion="css pinahh">.css-pinahh{margin-bottom:1rem;font-size:14px;}</style><div class="css-pinahh e1st1jau2">2022.11.01.</div><style data-emotion="css i00b3j">.css-i00b3j{display:-webkit-box;overflow:hidden;overflow-wrap:break-word;text-overflow:ellipsis;white-space:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;margin-bottom:1rem;font-size:45px;font-weight:900;}@media (max-width: 768px){.css-i00b3j{font-size:30px;}}</style><div class="css-i00b3j e1st1jau1">React Design Pattern - Compound Component (1)</div><style data-emotion="css 1ehu3dp">.css-1ehu3dp{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:baseline;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;margin-top:10px;font-size:1.125rem;font-weight:300;line-height:1.4;}.css-1ehu3dp .tags{font-size:0.875rem;margin-left:1em;text-transform:lowercase;}@media (max-width: 768px){.css-1ehu3dp{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;font-size:16px;font-weight:400;}}</style><div class="css-1ehu3dp e1st1jau0"><b class="category">React</b><p class="tags">react / design pattern / compound component</p></div></div></div><style data-emotion="css 1sz5d51">.css-1sz5d51{width:100%;margin:0;}</style><div class="css-1sz5d51 e1ijh0y11"><style data-emotion="css 1ent6x1">.css-1ent6x1{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;margin:0;padding:0;word-break:keep-all;white-space:break-space;line-height:1.8;font-size:1rem;font-weight:400;}.css-1ent6x1 p{padding:0.8em 0;}.css-1ent6x1 h1,.css-1ent6x1 h2,.css-1ent6x1 h3{font-weight:700;margin-bottom:1em;}.css-1ent6x1 *+h1,.css-1ent6x1 *+h2,.css-1ent6x1 *+h3{padding-top:2em;}.css-1ent6x1 hr+h1,.css-1ent6x1 hr+h2,.css-1ent6x1 hr+h3{padding-top:0;}.css-1ent6x1 h1{font-size:1.875rem;}.css-1ent6x1 h2{font-size:1.5rem;}.css-1ent6x1 h3{font-size:1.25rem;}.css-1ent6x1 blockquote{margin:30px 0;padding:5px 15px;background:rgba(0, 0, 0, 0.03);border-left:2px solid #000000;font-weight:700;}.css-1ent6x1 ol,.css-1ent6x1 ul{margin-left:20px;padding:20px 0;}.css-1ent6x1 hr{border:1px solid #000000;margin:100px 0;}.css-1ent6x1 a{color:#4263eb;-webkit-text-decoration:underline;text-decoration:underline;}.css-1ent6x1 pre[class*='language-']{margin:30px 0;padding:15px 20px;border-radius:12px;overflow:auto;}.css-1ent6x1 pre[class*='language-']::-webkit-scrollbar-thumb{background:rgba(255, 255, 255, 0.5);border-radius:3px;}.css-1ent6x1 code[class*='language-']{border-radius:4px;padding:2px 6px;}.css-1ent6x1 code[class*='language-'],.css-1ent6x1 pre[class*='language-']{tab-size:2;background-color:#e3e1e1;font-size:0.875rem;font-family:'Noto Sans Mono',monospace;}@media (max-width: 768px){.css-1ent6x1{width:100%;padding:80px 20px;line-height:1.6;}.css-1ent6x1 h1{font-size:23px;}.css-1ent6x1 h2{font-size:20px;}.css-1ent6x1 h3{font-size:17px;}.css-1ent6x1 img{width:100%;}.css-1ent6x1 hr{margin:3.5714rem 0;}}</style><div class="css-1ent6x1 e1ijh0y10"><p><small><em>last modified: 2022-11-03</em></small></p>
<h1 id="intro" style="position:relative;">Intro<a href="#intro" aria-label="intro permalink" class="anchor after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h1>
<p>리액트 컴포넌트를 만들다 보면 어느 순간 아래와 같은 god-like 컴포넌트들을 만들고 있다는 것을 깨닫게 됩니다.
특히 테이블이나 모달, 입력창처럼 간단해 보여서 작성하기 시작한 컴포넌트가 점점 기능과 인터랙션이 몇 백 줄짜리 컴포넌트가 됩니다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>Table
  id<span class="token operator">=</span><span class="token string">"table-id"</span>
  caption<span class="token operator">=</span><span class="token string">"New Data Table"</span>
  columns<span class="token operator">=</span><span class="token punctuation">{</span>columns<span class="token punctuation">}</span>
  rowData<span class="token operator">=</span><span class="token punctuation">{</span>rowData<span class="token punctuation">}</span>
  onRowClick<span class="token operator">=</span><span class="token punctuation">{</span>handleRowClick<span class="token punctuation">}</span>
  rowClassName<span class="token operator">=</span><span class="token string">"table-row"</span>
  cellClassName<span class="token operator">=</span><span class="token string">"table-cell"</span>
  refreshFn<span class="token operator">=</span><span class="token punctuation">{</span>handleRefreshData<span class="token punctuation">}</span>
  tableStyle<span class="token operator">=</span><span class="token punctuation">{</span>tableStyle<span class="token punctuation">}</span>
  checkboxSelection
<span class="token operator">></span></code></pre></div>
<p>위처럼 컴포넌트를 만들어놓고 후에 기능을 추가하거나 레이아웃이 변경된다면 <code class="language-text">Table</code> 컴포넌트를 뒤져서 수정해야 할 부분을 찾고 고친 다음에야 컴포넌트를 제대로 사용할 수 있을 것입니다.
하지만 테이블을 합성 컴포넌트(Compound component)로 만들어 사용한다면 위와 같은 컴포넌트의 문제점 몇 가지를 해결할 수 있습니다.</p>
<h1 id="what-is-the-problem-of-god-like-component" style="position:relative;">What is the problem of God-like component<a href="#what-is-the-problem-of-god-like-component" aria-label="what is the problem of god like component permalink" class="anchor after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h1>
<p>아래 글에서는 이러한 어려움을 크게 세 가지로 정리하고 있습니다.</p>
<blockquote>
<p><a href="https://jjenzz.com/compound-components" target="_blank" rel="nofollow">https://jjenzz.com/compound-components</a><br>
*번역: <a href="https://itchallenger.tistory.com/752" target="_blank" rel="nofollow">https://itchallenger.tistory.com/752</a></p>
</blockquote>
<br />
<ol>
<li><strong>Config driven for consumers</strong> : (API)사용자를 위한 설정</li>
<li><strong>Maintenance overhead</strong> : 유지 보수 부담</li>
<li><strong>Difficult to paint a mental picture</strong> : 멘탈 모델 파악의 어려움</li>
</ol>
<p>다시 맨 처음의 <code class="language-text">Table</code> 컴포넌트를 살펴보면, 아마도 아래와 같이 이미 작성되어 있을 것이라 짐작할 수 있습니다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">Table</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> 
    id<span class="token punctuation">,</span>
    caption<span class="token punctuation">,</span>
    columns<span class="token punctuation">,</span>
    rowData<span class="token punctuation">,</span>
    onRowClick<span class="token punctuation">,</span>
    rowClassName<span class="token punctuation">,</span>
    cellClassName<span class="token punctuation">,</span>
    refreshFn<span class="token punctuation">,</span>
    tableStyle<span class="token punctuation">,</span>
    checkboxSelection <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>

  <span class="token comment">// ...</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span>caption<span class="token operator">></span><span class="token punctuation">{</span>caption<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>caption<span class="token operator">></span>
      <span class="token operator">&lt;</span>table<span class="token operator">></span>
        <span class="token operator">&lt;</span>thead<span class="token operator">></span>
          <span class="token operator">&lt;</span>tr<span class="token operator">></span>
            <span class="token punctuation">{</span>checkboxSelection 
              <span class="token operator">?</span> <span class="token operator">&lt;</span>th<span class="token operator">></span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>handleToggleAllCheckbox<span class="token punctuation">}</span> aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">"toggle all"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span> 
              <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span>
            <span class="token punctuation">{</span>columns<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">cell</span> <span class="token operator">=></span> <span class="token operator">&lt;</span>th key<span class="token operator">=</span><span class="token punctuation">{</span>cell<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>cell<span class="token punctuation">.</span>data<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>thead<span class="token operator">></span>
        <span class="token operator">&lt;</span>tbody<span class="token operator">></span>
          <span class="token punctuation">{</span>rowData<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">row</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>tr key<span class="token operator">=</span><span class="token punctuation">{</span>row<span class="token punctuation">.</span>id<span class="token punctuation">}</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span>onRowClick<span class="token punctuation">}</span><span class="token operator">></span>
              <span class="token punctuation">{</span>checkboxSelection 
                <span class="token operator">?</span> <span class="token operator">&lt;</span>td<span class="token operator">></span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">handleToggleCheckbox</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span> aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">"toggle"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span> 
                <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span>
              <span class="token punctuation">{</span>row<span class="token punctuation">.</span>cells<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">cell</span> <span class="token operator">=></span> <span class="token operator">&lt;</span>td key<span class="token operator">=</span><span class="token punctuation">{</span>cell<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>cell<span class="token punctuation">.</span>data<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>tbody<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>이 <code class="language-text">Table</code> 컴포넌트에 테이블 footer나 pagination을 추가하려면 어떻게 해야 할까요? 혹은 각 셀의 값을 계산하여 새로운 열이 추가되어야 한다면?</p>
<p>전자는 <code class="language-text">caption</code>이나 <code class="language-text">thead</code>를 조건부로 표시하는 것처럼 어렵지 않을 수 있습니다. 하지만 이 상태에서 후자의 경우에는 고민이 생깁니다.</p>
<p>물론 데이터 자체가 가공되어 컴포넌트의 <code class="language-text">rowData</code>로 전달받을 수도 있겠지만 만약 서비스 사용자가 직접 가공된 값을 추가하고 테이블을 확인하고 싶다면? <code class="language-text">Table</code> 컴포넌트에서 액션에 맞는 데이터 가공을 수행해야 할까요? <code class="language-text">Table</code> 컴포넌트에 점점 더 데이터가 개입하고 있습니다. 이렇게 되면 이 컴포넌트는 다른 곳에서 다른 형태로 절대 사용하지 못할 것입니다.</p>
<p>재사용의 문제만 있는 것은 아닙니다. 가령 데이터 구조가 변경되어 테이블 컴포넌트를 수정해야 하는 상황이 발생할 때마다 스타일 코드와 인터랙션 코드와 데이터를 다루는 코드가 한 군데에 섞이게 된다면 의도하지 않은 오류가 발생하기 너무 쉬운 환경이 됩니다. 그 오류가 내가 이해하지 못하는 오류라면 디자인 담당자에게 물어야 할지 데이터 API 담당자에게 물어야 할지 결정하기 어려운 상황이 될지도 모릅니다.</p>
<h1 id="compound-component-instead-god-like-component" style="position:relative;"><strong>Compound Component</strong> instead God-like component<a href="#compound-component-instead-god-like-component" aria-label="compound component instead god like component permalink" class="anchor after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h1>
<p>이러한 상황을 대비하여 합성 컴포넌트 구조를 사용하여 아래처럼 컴포넌트를 사용할 수도 있습니다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">TableViewer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">useGetData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ...</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span>ActionBar <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>TableRoot<span class="token operator">></span>
        <span class="token operator">&lt;</span>TableCaption<span class="token operator">></span>New Data Table<span class="token operator">&lt;</span><span class="token operator">/</span>TableCaption<span class="token operator">></span>
        <span class="token operator">&lt;</span>TableHead<span class="token operator">></span>
          <span class="token operator">&lt;</span>TableRow<span class="token operator">></span>
            <span class="token operator">&lt;</span>TableCell<span class="token operator">></span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>handleToggleAllCheckbox<span class="token punctuation">}</span> aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">"toggle all"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>TableCell<span class="token operator">></span>
            <span class="token operator">&lt;</span>TableCell<span class="token operator">></span>First Name<span class="token operator">&lt;</span><span class="token operator">/</span>TableCell<span class="token operator">></span>
            <span class="token operator">&lt;</span>TableCell<span class="token operator">></span>Last Name<span class="token operator">&lt;</span><span class="token operator">/</span>TableCell<span class="token operator">></span>
            <span class="token operator">&lt;</span>TableCell<span class="token operator">></span>Email<span class="token operator">&lt;</span><span class="token operator">/</span>TableCell<span class="token operator">></span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>TableRow<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>TableHead<span class="token operator">></span>
        <span class="token operator">&lt;</span>TableBody<span class="token operator">></span>
          <span class="token punctuation">{</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">row</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>TableRow key<span class="token operator">=</span><span class="token punctuation">{</span>row<span class="token punctuation">.</span>id<span class="token punctuation">}</span> className<span class="token operator">=</span><span class="token string">"table-row"</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleRowClick<span class="token punctuation">}</span><span class="token operator">></span>
              <span class="token operator">&lt;</span>TableCell className<span class="token operator">=</span><span class="token string">"table-cell"</span><span class="token operator">></span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>handleToggleAllCheckbox<span class="token punctuation">}</span> aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">"toggle all"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>TableCell<span class="token operator">></span>
              <span class="token operator">&lt;</span>TableCell className<span class="token operator">=</span><span class="token string">"table-cell"</span><span class="token operator">></span><span class="token punctuation">{</span>row<span class="token punctuation">.</span>firstName<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>TableCell<span class="token operator">></span>
              <span class="token operator">&lt;</span>TableCell className<span class="token operator">=</span><span class="token string">"table-cell"</span><span class="token operator">></span><span class="token punctuation">{</span>row<span class="token punctuation">.</span>lastName<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>TableCell<span class="token operator">></span>
              <span class="token operator">&lt;</span>TableCell className<span class="token operator">=</span><span class="token string">"table-cell"</span><span class="token operator">></span><span class="token punctuation">{</span>row<span class="token punctuation">.</span>email<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>TableCell<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>TableRow<span class="token operator">></span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>TableBody<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>TableRoot<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>언뜻 보기엔 컴포넌트를 만들 때 코드를 많이 작성하느냐 혹은 사용할 때 코드를 많이 작성하는냐의 차이처럼 생각될 수도 있습니다. 심지어는 코드의 양만 보기에는 합성 컴포넌트가 만들고 사용하기에 복잡해 보이기도 합니다.</p>
<p>하지만 첫 번째 코드처럼 <code class="language-text">Table</code> 컴포넌트를 만들고 사용한다면, 기능이나 인터랙션만이 아니라 데이터 구조가 변경될 때도 마찬가지로 <code class="language-text">Table</code>을 수정할 후 사용해야만 합니다. 반면 합성 컴포넌트로 만들어진 <code class="language-text">Table</code> 컴포넌트는 데이터의 구조에 대해 알 필요가 없게 됩니다. 만들고자 하는 UI 컴포넌트에서 데이터 핸들링을 최소화하고 그래픽 인터페이스만을 담당한다면 불필요한 컴포넌트 수정을 하지 않아도 되며, 해당 컴포넌트를 재사용하기에도 쉬워집니다.</p>
<p>이러한 점은 한 명의 개발자가 컴포넌트를 만들고 데이터를 사용할 때는 크게 느끼지 못하기도 합니다. 하지만 서비스가 커지고 두 명 이상의 개발자가 함께 개발하는 상황에서는 이러한 문제로 소비하게 되는 시간이 늘어날수록 결국 개발자가 더 중요한 문제에 집중할 수 있는 시간을 빼앗습니다.</p>
<p>아래 그림에서 설명하듯이 하나의 큰 구조의 각 컴포넌트를 관심사별로 분리하고 역할을 분담하여 나눕니다.</p>
<figure>
  <img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fk.kakaocdn.net%2Fdn%2FY8oEa%2FbtrseQcYF2P%2FTk6r938XievtUGe6jpjTc0%2Fimg.png" alt="합성 컴포넌트를 이용한 관심사의 분리">
  <figcaption>대부분의 로직은 기본 Root 컴포넌트에 포함되며, React.Context를 사용해 모든 자식 컴포넌트의 states와 handlers를 공유하여 책임 소재를 명확히 분리할 수 있다.<br>이미지 출처: https://cocobi.tistory.com/120</figcaption>
</figure>
<p>하지만 역시 아래 그림에서처럼 너무 자유도가 높아도 예상치 못한 문제가 발생할 수 있으므로 고정된 레이아웃이나 구조, 순서가 필요하다면 서브 컴포넌트를 작성하며 설정합니다.</p>
<figure>
  <img src="https://blog.kakaocdn.net/dn/bsGzm3/btrslWptc6h/GJRzOiaO6OcWi6MgZeFODK/img.png" alt="합성 컴포넌트를 사용하여 발생하는 과도한 UI 유연성">
  <figcaption>유연성이 높다는 것은 예기치 않은 동작을 유발할 가능성이 크다는 것을 의미한다.<br>이미지 출처: https://cocobi.tistory.com/120</figcaption>
</figure>
<br />
<p>끝으로 다음은 합성 컴포넌트에 대한 예시들입니다.</p>
<p><strong>Compound Components Ref.</strong></p>
<ul>
<li><a href="https://www.w3.org/WAI/ARIA/apg/example-index/tabs/tabs-manual.html" target="_blank" rel="nofollow">https://www.w3.org/WAI/ARIA/apg/example-index/tabs/tabs-manual.html</a></li>
<li><a href="https://reach.tech/tabs/" target="_blank" rel="nofollow">https://reach.tech/tabs/</a></li>
<li><a href="https://www.radix-ui.com/docs/primitives/components/select#anatomy" target="_blank" rel="nofollow">https://www.radix-ui.com/docs/primitives/components/select#anatomy</a></li>
</ul>
<p>이외에도, <a href="https://ant.design/components/layout/" target="_blank" rel="nofollow">Ant Design의 Layout 컴포넌트</a> 같이 UI 라이브러리들에서도 합성 컴포넌트 구조를 확인할 수 있습니다.</p>
<h1 id="outro-this-is-no-silver-bullet-too" style="position:relative;">Outro, This is no silver bullet too<a href="#outro-this-is-no-silver-bullet-too" aria-label="outro this is no silver bullet too permalink" class="anchor after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h1>
<p>물론 합성 컴포넌트 패턴 하나만으로 당연히 너무 많은 문제를 해결할 수는 없습니다. 바로 위에서도 언급했지만 너무 유연한 프로그램은 예상치 못한 문제를 뱉어 냅니다. 그리고 현재 우리 주변의 모든 애플리 메이션과 서비스들은 점점 더 복잡해지고 사용자에게 맞출 것을 요구하고 있습니다. 이러한 복잡성을 한 번에 해소할 은탄환(silver bullet)은 존재하지 않는다고 1986년에 이야기했다고 합니다.(Fred Brooks, “Silver Bullet-Essence and Accidents of Software Engineering”) 그럴수록 적(?)을 알기 위해서는 보다 더 복합적이고 유연한 방법이 필요하지 않나라는 생각이 들기도 합니다.</p>
<p>합성 컴포넌트도 마찬가지로 한 가지 방법이기 때문에 이쯤에서 다음으로 넘어가, 합성 컴포넌트를 만들고 실제 사용할 때는 어떠할지 살펴보도록 하겠습니다.</p>
<p align="center">⏭️</p></div></div></div></div><style data-emotion="css hx9xpc">@media (max-width: 768px){.css-hx9xpc{padding:0 20px;}}</style><div class="css-hx9xpc e1gqsjds0"></div><style data-emotion="css 1xzitl4">.css-1xzitl4{all:unset;display:block;position:fixed;bottom:50%;right:1em;font-size:1.25rem;-webkit-transition:200ms all;transition:200ms all;}@media (hover: hover){.css-1xzitl4:hover{color:rgb(64, 107, 159);}}</style><button title="go to top of this page" class="css-1xzitl4 ej7tdhn0"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-up" class="svg-inline--fa fa-arrow-up " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M214.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 141.2V448c0 17.7 14.3 32 32 32s32-14.3 32-32V141.2L329.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z"></path></svg></button><style data-emotion="css 9w9jmx">.css-9w9jmx{display:grid;place-items:center;margin-top:auto;padding:50px 0;font-size:15px;text-align:center;line-height:1.5;}@media (max-width: 768px){.css-9w9jmx{font-size:13px;}}</style><footer class="css-9w9jmx e1oae0v80">Thank You for Visiting My Blog, Have a Good Day 😆<!-- --><br/>© 2022 Developer 나연, Powered By Gatsby.<!-- --></footer></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2022-11-01/react-design-pattern-compound-component-1/";window.___webpackCompilationHash="5c69fb18501c9211fb59";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-c9fa82aa5b1f9c65f078.js"],"app":["/app-f2c54ddfcf6baef1de0f.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-7984ed6cd1e62c98fbe8.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-fdae1a3eab6feaed7444.js"],"component---src-pages-portfolio-tsx":["/component---src-pages-portfolio-tsx-a08be60cd07649da539b.js"],"component---src-templates-post-template-tsx":["/component---src-templates-post-template-tsx-3d77abe2d589e529322b.js"]};/*]]>*/</script><script src="/polyfill-c9fa82aa5b1f9c65f078.js" nomodule=""></script><script src="/app-f2c54ddfcf6baef1de0f.js" async=""></script><script src="/framework-c45ea1cbb39153ed5c73.js" async=""></script><script src="/webpack-runtime-b87317512fee8805cf7f.js" async=""></script></body></html>