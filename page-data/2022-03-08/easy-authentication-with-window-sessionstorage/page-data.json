{"componentChunkName":"component---src-templates-post-template-tsx","path":"/2022-03-08/easy-authentication-with-window-sessionstorage/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h1>Temporary authentication with window.sessionStorage</h1>\n<blockquote>\n<p>The code below is based on the code of <a href=\"https://github.com/remix-run/react-router/tree/main/examples/auth\" target=\"_blank\" rel=\"nofollow\">‘Auth Example (react-router/examples/auth/)’</a></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// auth.js</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\r\n  useNavigate<span class=\"token punctuation\">,</span>\r\n  useLocation<span class=\"token punctuation\">,</span>\r\n  Navigate<span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-router-dom\"</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token operator\">...</span>\r\n<span class=\"token keyword\">let</span> AuthContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">AuthProvider</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> userState <span class=\"token operator\">=</span> sessionStorage<span class=\"token operator\">?.</span><span class=\"token constant\">LOGGED</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">/// temp - stay logged in</span>\r\n  <span class=\"token keyword\">let</span> <span class=\"token punctuation\">[</span>user<span class=\"token punctuation\">,</span> setUser<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>userState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  \r\n  <span class=\"token keyword\">let</span> <span class=\"token function-variable function\">signin</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">newUser<span class=\"token punctuation\">,</span> callback</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">return</span> fakeAuthProvider<span class=\"token punctuation\">.</span><span class=\"token function\">signin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token function\">setUser</span><span class=\"token punctuation\">(</span>newUser<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      sessionStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"LOGGED\"</span><span class=\"token punctuation\">,</span> newUser<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">/// temp - stay logged in</span>\r\n      <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n  \r\n  <span class=\"token keyword\">let</span> <span class=\"token function-variable function\">signout</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">callback</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">return</span> fakeAuthProvider<span class=\"token punctuation\">.</span><span class=\"token function\">signout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token function\">setUser</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      sessionStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"LOGGED\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">/// temp - stay logged in</span>\r\n      <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">let</span> value <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> user<span class=\"token punctuation\">,</span> signin<span class=\"token punctuation\">,</span> signout <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>AuthContext<span class=\"token punctuation\">.</span>Provider value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>AuthContext<span class=\"token punctuation\">.</span>Provider<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n<span class=\"token operator\">...</span></code></pre></div>\n<hr>\n<h3>Referred to</h3>\n<ul>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/API/Window/sessionStorage\" target=\"_blank\" rel=\"nofollow\">https://developer.mozilla.org/ko/docs/Web/API/Window/sessionStorage</a></li>\n<li><a href=\"https://seungyooon.tistory.com/23\" target=\"_blank\" rel=\"nofollow\">https://seungyooon.tistory.com/23</a></li>\n</ul>","frontmatter":{"title":"Easy authentication with window.sessionStorage","summary":"How to make easy authentication with `window.sessionStorage` with react-router","date":"2022.03.08.","categories":["Web","React"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACFUlEQVQoz32SzWsTURTF809I3bgV964r+A+4UUQQQag7EbpxIdatXVXFkk1F6kKoCKXG0kWhlSTUCilpK0kTJ8lkMvmcmYSM+ejMm3vfu1eSNG20xbd4PDjvd+/hcELyv4dIkpLMxMxM6h81dPpClExSM73tRDe+34sle/H93sZOZy12vLbtfNmqr8fcdgeIBj/PwVKSwuZvTJcgY0LGDLSq+hApLy3HXy4ezL+Jzr8v93xF6iJYyYG99jHnqpirQq4KhbqMRJuR1UR4xVr46IQ/256ACXYMK4mux2bNrR8l9IqnVVCrQL4GWhVTJhVqwZHhaXUOnKQSLir+CyaSTRfSqcPdvR9Zs61bNNyMRUtWHGi6ULbBsKUQvpJ4LjClAuEbev5nqVHREpV6V7eoZKPeQMOWoymGhQKISOHY+ClM6HW97Gru4LD5faFWa+g2mw4WLTQdObprLQYQwu8P85mEEaUisqP9yE0/uySYhQAflA9KgApAuZ5v9e1MKpdPJ5kZASbTRgBg5qezM+HF18wcCCFPViATWcqbfffs+u2V9Z3mQAU8g0dkUdemp2+8mHvOzDCcPfSEzLy1sXll6tLja1OZza8DNQjO4CAImPnV2+X7Dx49nHnS6faICPHEzm4hFbp6+e69Ozx3S377hMwSJuBhveQvo1+1/b1Uy/dBjYtMSvUDP9EqtUVfGVloO5J41JQ/1PLBpL37wyQAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/20d5fa7835f83c74df40aebd513e9451/4f7c3/default.png","srcSet":"/static/20d5fa7835f83c74df40aebd513e9451/c4422/default.png 192w,\n/static/20d5fa7835f83c74df40aebd513e9451/58273/default.png 384w,\n/static/20d5fa7835f83c74df40aebd513e9451/4f7c3/default.png 768w","sizes":"(min-width: 768px) 768px, 100vw"},"sources":[{"srcSet":"/static/20d5fa7835f83c74df40aebd513e9451/24293/default.webp 192w,\n/static/20d5fa7835f83c74df40aebd513e9451/e2e8b/default.webp 384w,\n/static/20d5fa7835f83c74df40aebd513e9451/2a3ce/default.webp 768w","type":"image/webp","sizes":"(min-width: 768px) 768px, 100vw"}]},"width":768,"height":500}},"publicURL":"/static/20d5fa7835f83c74df40aebd513e9451/default.png"}}}}]}},"pageContext":{"slug":"/2022-03-08/easy-authentication-with-window-sessionstorage/"}},"staticQueryHashes":[]}