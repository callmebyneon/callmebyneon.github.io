{"componentChunkName":"component---src-templates-post-template-tsx","path":"/2022-06-21/not-unique-key-in-react/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h1>What is <em>NOT unique</em> key prop in React</h1>\n<h3>👉 introduction</h3>\n<p>처음 이 에러를 마주했을 때, List라는 단어에 넘어가 아래와 같은 코드에는 key를 주지 않았다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> colorChips <span class=\"token operator\">=</span> colors<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">color</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\r\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>color<span class=\"token punctuation\">.</span>name<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\r\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>당연히 에러가 발생했고 무시도 해봤지만 콘솔창에 자리만 차지하는 이 에러를 더이상 두고 볼 수가 없었다.\r\n여기저기 key 값을 추가해보기도 하고 구글에도 검색해보면서 key 값을 추가할 때 무엇을 생각해야하는지 적어놓기로 했다.</p>\n<h3>👉 key가 필요한 경우</h3>\n<p>React 공식 문서에서는 key를 다음과 같이 설명한다.</p>\n<blockquote>\n<p>(ENG) A “key” is a special string attribute you need to include when creating lists of elements.<br>\n(KOR) “key”는 엘리먼트 리스트를 만들 때 포함해야 하는 특수한 문자열 어트리뷰트입니다.</p>\n</blockquote>\n<p>따라서 에러가 말하고 있는 “key” prop은 배열을 JSX에서 렌더할 때 <strong>리스트 형태로 만들어지는 엘리먼트</strong>가 가져야할 고유한 값을 말한다. return 값이 배열인 메소드를 사용하여 엘리먼트를 만들었을 때, return된 배열의 각 아이템 최상위에 각각을 구별할 수 있도록 key prop이 추가되어야 하는 것을 의미한다.</p>\n<p>이 에러가 발생하지 않는 unique key의 조건은 렌더 시 반복되는 siblings 사이에서 유일할 것이므로, 아래와 같이 작성해도 에러는 발생하지 않는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> todoItems <span class=\"token operator\">=</span> todos<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\r\n  <span class=\"token operator\">&lt;</span>li key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">}</span>\r\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n  <span class=\"token operator\">&lt;</span>List<span class=\"token operator\">></span>\r\n  \t<span class=\"token operator\">&lt;</span>ul<span class=\"token operator\">></span>\r\n  \t  <span class=\"token punctuation\">{</span>todoItems<span class=\"token punctuation\">}</span>\r\n  \t  <span class=\"token operator\">&lt;</span>li<span class=\"token operator\">></span>empty<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\r\n  \t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ul<span class=\"token operator\">></span>\r\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>List<span class=\"token operator\">></span>\r\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>👉 not unique key</h3>\n<p>아래에 실제로 작성했던 코드를 바탕으로 한 에러 코드와 안티 패턴들을 추가한다.</p>\n<h4>1. no key prop</h4>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// ❌ Error</span>\r\n<span class=\"token keyword\">const</span> colorChips <span class=\"token operator\">=</span> colors<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">color</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\r\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>color<span class=\"token punctuation\">.</span>name<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\r\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// 🔺</span>\r\n<span class=\"token keyword\">const</span> colorChips <span class=\"token operator\">=</span> colors<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">color<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\r\n  <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>color<span class=\"token punctuation\">.</span>name<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\r\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h4>2. same key in the siblings</h4>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// ❌ Error</span>\r\n<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n  <span class=\"token operator\">&lt;</span>List<span class=\"token operator\">></span>\r\n  \t<span class=\"token operator\">&lt;</span>ul<span class=\"token operator\">></span>\r\n  \t  <span class=\"token punctuation\">{</span>todoItems<span class=\"token punctuation\">}</span>\r\n  \t  <span class=\"token punctuation\">{</span>todoItems<span class=\"token punctuation\">}</span>\r\n  \t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ul<span class=\"token operator\">></span>\r\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>List<span class=\"token operator\">></span>\r\n<span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token comment\">// 🔺</span>\r\n<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n  <span class=\"token operator\">&lt;</span>List<span class=\"token operator\">></span>\r\n  \t<span class=\"token operator\">&lt;</span>ul<span class=\"token operator\">></span>\r\n  \t  <span class=\"token punctuation\">{</span>todoItems<span class=\"token punctuation\">}</span>\r\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ul<span class=\"token operator\">></span>\r\n    <span class=\"token operator\">&lt;</span>ul<span class=\"token operator\">></span>\r\n  \t  <span class=\"token punctuation\">{</span>todoItems<span class=\"token punctuation\">}</span>\r\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ul<span class=\"token operator\">></span>\r\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>List<span class=\"token operator\">></span>\r\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h4>3. use index</h4>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 🔺</span>\r\n<span class=\"token keyword\">const</span> navItems <span class=\"token operator\">=</span> items<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\r\n  <span class=\"token operator\">&lt;</span>li key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n    <span class=\"token operator\">&lt;</span>a href<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span>\r\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// ✅</span>\r\n<span class=\"token keyword\">const</span> navItems <span class=\"token operator\">=</span> items<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\r\n  <span class=\"token operator\">&lt;</span>li key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n    <span class=\"token operator\">&lt;</span>a href<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span>\r\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h4>4. use rendering time</h4>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 🔺</span>\r\n<span class=\"token keyword\">const</span> todoItems <span class=\"token operator\">=</span> todos<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\r\n  <span class=\"token operator\">&lt;</span>li key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">}</span>\r\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// ✅</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">createNewTodo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">text</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n  <span class=\"token literal-property property\">completed</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token function\">gernerateRandomId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n  text\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token operator\">...</span>\r\n<span class=\"token keyword\">const</span> todoItems <span class=\"token operator\">=</span> todos<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\r\n  <span class=\"token operator\">&lt;</span>li key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">}</span>\r\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<hr>\n<p>참고:</p>\n<ul>\n<li><a href=\"https://ko.reactjs.org/docs/lists-and-keys.html#keys\" target=\"_blank\" rel=\"nofollow\">https://ko.reactjs.org/docs/lists-and-keys.html#keys</a></li>\n<li><a href=\"https://ko.reactjs.org/docs/reconciliation.html#recursing-on-children\" target=\"_blank\" rel=\"nofollow\">https://ko.reactjs.org/docs/reconciliation.html#recursing-on-children</a></li>\n<li><a href=\"https://robinpokorny.medium.com/index-as-a-key-is-an-anti-pattern-e0349aece318\" target=\"_blank\" rel=\"nofollow\">https://robinpokorny.medium.com/index-as-a-key-is-an-anti-pattern-e0349aece318</a></li>\n<li><a href=\"https://velog.io/@jhplus13/%EC%9C%84%EC%8A%A4%ED%83%80%EA%B7%B8%EB%9E%A8-%EA%B0%9C%EB%B0%9C%EB%85%B8%EB%93%9CReact#-unique%ED%95%9C-key\" target=\"_blank\" rel=\"nofollow\">https://velog.io/@jhplus13/%EC%9C%84%EC%8A%A4%ED%83%80%EA%B7%B8%EB%9E%A8-%EA%B0%9C%EB%B0%9C%EB%85%B8%EB%93%9CReact#-unique%ED%95%9C-key</a></li>\n</ul>","frontmatter":{"title":"NOT unique key","summary":"","date":"2022.06.21.","categories":["React","Issue"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACFUlEQVQoz32SzWsTURTF809I3bgV964r+A+4UUQQQag7EbpxIdatXVXFkk1F6kKoCKXG0kWhlSTUCilpK0kTJ8lkMvmcmYSM+ejMm3vfu1eSNG20xbd4PDjvd+/hcELyv4dIkpLMxMxM6h81dPpClExSM73tRDe+34sle/H93sZOZy12vLbtfNmqr8fcdgeIBj/PwVKSwuZvTJcgY0LGDLSq+hApLy3HXy4ezL+Jzr8v93xF6iJYyYG99jHnqpirQq4KhbqMRJuR1UR4xVr46IQ/256ACXYMK4mux2bNrR8l9IqnVVCrQL4GWhVTJhVqwZHhaXUOnKQSLir+CyaSTRfSqcPdvR9Zs61bNNyMRUtWHGi6ULbBsKUQvpJ4LjClAuEbev5nqVHREpV6V7eoZKPeQMOWoymGhQKISOHY+ClM6HW97Gru4LD5faFWa+g2mw4WLTQdObprLQYQwu8P85mEEaUisqP9yE0/uySYhQAflA9KgApAuZ5v9e1MKpdPJ5kZASbTRgBg5qezM+HF18wcCCFPViATWcqbfffs+u2V9Z3mQAU8g0dkUdemp2+8mHvOzDCcPfSEzLy1sXll6tLja1OZza8DNQjO4CAImPnV2+X7Dx49nHnS6faICPHEzm4hFbp6+e69Ozx3S377hMwSJuBhveQvo1+1/b1Uy/dBjYtMSvUDP9EqtUVfGVloO5J41JQ/1PLBpL37wyQAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/20d5fa7835f83c74df40aebd513e9451/4f7c3/default.png","srcSet":"/static/20d5fa7835f83c74df40aebd513e9451/c4422/default.png 192w,\n/static/20d5fa7835f83c74df40aebd513e9451/58273/default.png 384w,\n/static/20d5fa7835f83c74df40aebd513e9451/4f7c3/default.png 768w","sizes":"(min-width: 768px) 768px, 100vw"},"sources":[{"srcSet":"/static/20d5fa7835f83c74df40aebd513e9451/24293/default.webp 192w,\n/static/20d5fa7835f83c74df40aebd513e9451/e2e8b/default.webp 384w,\n/static/20d5fa7835f83c74df40aebd513e9451/2a3ce/default.webp 768w","type":"image/webp","sizes":"(min-width: 768px) 768px, 100vw"}]},"width":768,"height":500}},"publicURL":"/static/20d5fa7835f83c74df40aebd513e9451/default.png"}}}}]}},"pageContext":{"slug":"/2022-06-21/not-unique-key-in-react/"}},"staticQueryHashes":[]}